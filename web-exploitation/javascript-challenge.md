# CTF Write-up: JavaScript Challenge

**Category:** Web
**Challenge Source:** tcraCyber champion 2026
**Write-up Author:** TitoDevsec (T1t0D3v$3c)

## Challenge Summary
A web portal named "CyberChampions Web Security Portal" greets users with a welcome message encouraging them to register a new account and sign in. However, no login or registration form is visible on the main page, suggesting dynamic loading or client-side JavaScript handling.

## Vulnerability Analysis
### What was wrong?
The application relied on client-side discovery for sensitive endpoints. The registration and login forms were not linked on the main page, but the endpoints were active and accessible. Furthermore, sensitive credentials or keys were stored in a way that they could be discovered through simple directory brute-forcing and Base64 decoding.

## Solution
1.  **Enumeration:** Automated directory brute-forcing using tools like `feroxbuster` or `gobuster` revealed an interesting endpoint: `/key`.
2.  **Discovery:** Accessing `http://<target-ip>:5011/key` returned a Base64-encoded string: `TXlOZXdDVEZQYXNzd29yZDEyMyE=`.
3.  **Decoding:** Decoding the string revealed the password:
    ```bash
    echo -n "TXlOZXdDVEZQYXNzd29yZDEyMyE=" | base64 -d
    # Output: MyNewCTFPassword123!
    ```
4.  **Exploitation:** Using the discovered password, one could log in or register at the `/login` or `/register` endpoints discovered during enumeration.

## Code Comparison

### Vulnerable Code (Conceptual)
Hardcoding secrets or exposing them via unauthenticated endpoints:
```javascript
// Server-side (Express example)
app.get('/key', (req, res) => {
    // Sensitive key exposed without authentication
    res.send("TXlOZXdDVEZQYXNzd29yZDEyMyE="); 
});
```

### Secure Code
Secrets should be stored in environment variables and never exposed via public endpoints. Access to sensitive routes should require proper authentication.
```javascript
// Server-side (Secure)
const ADMIN_KEY = process.env.ADMIN_KEY;

app.get('/key', authenticateUser, (req, res) => {
    if (req.user.isAdmin) {
        res.send(ADMIN_KEY);
    } else {
        res.status(403).send("Unauthorized");
    }
});
```

## Lessons Learned
*   **Security through obscurity is not security:** Hiding links to forms does not prevent attackers from finding the endpoints.
*   **Never expose secrets:** Sensitive information like passwords or API keys should never be accessible via public endpoints, even if encoded.
*   **Proper Access Control:** Always implement server-side authentication and authorization for all sensitive routes.

## Flag
`MyNewCTFPassword123!` (Note: This was the credential found; the actual flag was obtained after login).
